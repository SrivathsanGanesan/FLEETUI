<div class="flex h-screen">
    <app-sidenavbar></app-sidenavbar>
    <div class="flex-grow ml-64 p-8 h-screen overflow-hidden">
      <div class="mainContent flex flex-col h-full justify-center items-center">
          <!-- Header section -->
            <div class="header-section">
                <h1 class="header-title">User Management</h1>
                <div class="subheader-container">
                <div class="subheader-text"></div>
                <img
                    src="../../assets/icons/i-icon.svg"
                    alt="Icon"
                    class="subheader-icon"
                />
                </div>
            </div>
          <!-- Button -->
          <span (click)="userCreatePopUpOpen()">
            <button class="px-10 py-3 text-[14px] rounded-md bg-[#D30000] font-semibold text-white">Create User</button>
          </span>
        </div>
        <div class="table-container">
            <!-- Table Title -->
            <div class="table-header">
              <div class="header-column name-column">Name</div>
              <div class="header-column">User Type</div>
              <div class="header-column">Created By</div>
              <div class="header-column">Created on</div>
              <div class="header-column options-column">Options</div>
            </div>
            
            <!-- Table Rows -->
            <div class="table-rows">
              <!-- If no data is found -->
              <p class="no-data-message">- No data Found -</p>
              
              <!-- If data exists -->
              <div class="table-row">
                <div class="table-column">{{user!.userName}}</div>
                <div class="table-column">{{user!.userRole}}</div>
                <div class="table-column">{{user!.createdBy}}</div>
                <div class="table-column">{{user!.createdOn}}</div>
                <div class="table-column options">
                  <svg (click)="userPermissionPopUpOpen(user!.userName)" class="option-icon" width="29" height="31">
                    <!-- SVG content -->
                  </svg>
                  <svg (click)="getDeleteUser(user!.userName, user!.userRole)" class="option-icon" width="28" height="28">
                    <!-- SVG content -->
                  </svg>
                </div>
              </div>
            </div>
          </div>
      
      
                <!-- Create User Popup -->
                <div [ngClass]="{'hidden': !userCreatePopUp}" class="popup-overlay">
                    <div class="popup-container">
                        <!-- Title -->
                        <span class="popup-title">
                            <p class="title-text">Create User</p>
                            <p class="subtitle-text">
                            Create a New User
                            <svg width="20" height="20" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g clip-path="url(#clip0_513_29001)">
                                <path d="M12.4987 2.08301C6.75495 2.08301 2.08203 6.75592 2.08203 12.4997C2.08203 18.2434 6.75495 22.9163 12.4987 22.9163C18.2424 22.9163 22.9154 18.2434 22.9154 12.4997C22.9154 6.75592 18.2424 2.08301 12.4987 2.08301ZM13.5404 17.708H11.457V11.458H13.5404V17.708ZM13.5404 9.37467H11.457V7.29134H13.5404V9.37467Z" fill="black"/>
                                </g>
                                <defs>
                                <clipPath id="clip0_513_29001">
                                    <rect width="25" height="25" fill="white"/>
                                </clipPath>
                                </defs>
                            </svg>
                            </p>
                        </span>
        
                        <!-- User Credentials Form -->
                        <div class="form-container">
                            <!-- Username and UserRole -->
                            <span class="input-group">
                            <input [(ngModel)]="userName" type="text" placeholder="Username" class="text-input">
                            <!-- DropDown -->
                            <span class="dropdown" (click)="userRoleChange()">
                                <p class="dropdown-text">{{userRole}}</p>
                                <svg [ngClass]="{'rotateArrow': userRoleOCstate}" class="arrow-icon" width="14" height="15" viewBox="0 0 14 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M7.00007 12.3125L0 5.42194L2.33335 3.125L7.00007 7.71879L11.6667 3.125L14 5.42194L7.00007 12.3125Z" fill="black"/>
                                </svg>
                                <!-- DropDown Options -->
                                <span *ngIf="userRoleOCstate" class="dropdown-options">
                                <p *ngFor="let user of userRoleCredentials" class="dropdown-item" (click)="changeUserRole(user.order)">{{user.userRole}}</p>
                                </span>
                                </span>
                                </span>
        
                                <!-- Password and Confirm Password with show password button -->
                                <span class="input-group">
                                <span class="password-container">
                                    <input [(ngModel)]="passWord" type="{{passwordType}}" placeholder="Password" class="text-input">
                                    <p class="show-password" (click)="showPassword()">{{passwordView}}</p>
                                </span>
                                <span class="password-container">
                                    <input [(ngModel)]="confrimPassword" type="{{confrimPasswordType}}" placeholder="Confirm Password" class="text-input">
                                    <p class="show-password" (click)="showConfrimPassword()">{{confrimPasswordView}}</p>
                                </span>
                                </span>
                                <p class="error-message">{{errorMessage}}</p>
                        
                                <!-- Buttons -->
                                <div class="button-group">
                                <button (click)="createUser()" class="create-button">Create User</button>
                                <button (click)="userCreatePopUpOpen()" class="cancel-button">Cancel</button>
                                </div>
                        </div>
                    </div>
                </div>
  
      
                    <!-- User Permission Popup -->
                    <div [ngClass]="{'hidden': !userPermissionOCstate}" class="user-permission-popup">
                        <div class="popup-content">
                        
                            <div class="popup-header">
                                <div class="popup-title">
                                <p class="title">User Permission</p>
                                <p class="subtitle">
                                Edit the user permission
                                <svg width="20" height="20" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g clip-path="url(#clip0_513_29001)">
                                    <path d="M12.4987 2.08301C6.75495 2.08301 2.08203 6.75592 2.08203 12.4997C2.08203 18.2434 6.75495 22.9163 12.4987 22.9163C18.2424 22.9163 22.9154 18.2434 22.9154 12.4997C22.9154 6.75592 18.2424 2.08301 12.4987 2.08301ZM13.5404 17.708H11.457V11.458H13.5404V17.708ZM13.5404 9.37467H11.457V7.29134H13.5404V9.37467Z" fill="black"/>
                                </g>
                                <defs>
                                    <clipPath id="clip0_513_29001">
                                    <rect width="25" height="25" fill="white"/>
                                    </clipPath>
                                </defs>
                                </svg>
                              </p>
                            </div>
                            <svg (click)="userPermissionPopUpClose()" class="close-icon" width="36" height="35" viewBox="0 0 36 35" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M28.5625 9.00739L26.0551 6.5L17.7812 14.7739L9.50739 6.5L7 9.00739L15.2739 17.2812L7 25.5551L9.50739 28.0625L17.7812 19.7886L26.0551 28.0625L28.5625 25.5551L20.2886 17.2812L28.5625 9.00739Z" fill="#D30000"/>
                            </svg>
                        </div>
  
                <div class="permission-options">
                    
                    <div *ngFor="let permission of userPermissionOptions" class="permission-item">
                    <div class="permission-name">
                        <p>{{permission.nameTag}}</p>
                    </div>
                    <div class="permission-controls">
                        <div class="control" (click)="changeUserPermission(permission.order, permission.isAvail)">
                        <span [ngClass]="{'active': userPermissionState[permission.order][permission.isAvail]}" class="circle"></span>
                        <p>ENABLE</p>
                        </div>
            
                        <div class="control" (click)="changeUserPermission(permission.order, permission.create)">
                        <span [ngClass]="{'active': userPermissionState[permission.order][permission.create]}" class="circle"></span>
                        <p>CREATE</p>
                        </div>
            
                        <div class="control" (click)="changeUserPermission(permission.order, permission.edit)">
                        <span [ngClass]="{'active': userPermissionState[permission.order][permission.edit]}" class="circle"></span>
                        <p>EDIT</p>
                        </div>
            
                        <div class="control" (click)="changeUserPermission(permission.order, permission.delete)">
                        <span [ngClass]="{'active': userPermissionState[permission.order][permission.delete]}" class="circle"></span>
                        <p>DELETE</p>
                        </div>
            
                        <div class="control" (click)="changeUserPermission(permission.order, permission.view)">
                        <span [ngClass]="{'active': userPermissionState[permission.order][permission.view]}" class="circle"></span>
                        <p>VIEW</p>
                        </div>
                    </div>
                    </div>
                </div>
            
                <div class="popup-footer">
                    <button class="edit-btn" (click)="saveEditPermission()">Edit Permission</button>
                </div>
                </div>
            </div>
  
      
      
                <div class="popup-container hidden" id="deleteUserPopup">
                    <div class="popup-card">
                    <!-- Title -->
                    <span class="popup-title">
                        Delete
                        <p class="popup-subtitle">
                        Delete a user
                        <svg width="20" height="20" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <g clip-path="url(#clip0_513_29001)">
                            <path d="M12.4987 2.08301C6.75495 2.08301 2.08203 6.75592 2.08203 12.4997C2.08203 18.2434 6.75495 22.9163 12.4987 22.9163C18.2424 22.9163 22.9154 18.2434 22.9154 12.4997C22.9154 6.75592 18.2424 2.08301 12.4987 2.08301ZM13.5404 17.708H11.457V11.458H13.5404V17.708ZM13.5404 9.37467H11.457V7.29134H13.5404V9.37467Z" fill="black"/>
                            </g>
                            <defs>
                            <clipPath id="clip0_513_29001">
                                <rect width="25" height="25" fill="white"/>
                            </clipPath>
                            </defs>
                        </svg>
                        </p>
                    </span>
                
                    <!-- Confirmation Message -->
                    <p class="popup-message">Are you sure to delete the user?</p>
                
                    <!-- Buttons -->
                    <span class="button-container">
                        <p class="popup-button delete" onclick="deleteUser(deleteUserName, deleteUserRole)">Delete</p>
                        <p class="popup-button cancel" onclick="deleteUserPopUp()">Cancel</p>
                    </span>
                    </div>
                </div>
         
  </div>    
</div>